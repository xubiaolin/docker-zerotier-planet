<a href="https://edgeone.ai/?from=github">
  <img src="https://edgeone.ai/media/34fe3a45-492d-4ea4-ae5d-ea1087ca7b4b.png" alt="Logo" /> æœ¬é¡¹ç›®çš„ CDN åŠ é€Ÿå’Œå®‰å…¨ä¿æŠ¤ç”±è…¾è®¯ EdgeOne èµåŠ©
</a>

# Docker ZeroTier Planet

> ä¸€é”®éƒ¨ç½² ZeroTier Planet æœåŠ¡å™¨ï¼Œæ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²

## ğŸ“¢ äº¤æµç¾¤

### Telegram
- **TGäº¤æµç¾¤**ï¼šhttps://t.me/+JduuWfhSEPdlNDk1

### QQ Group
- **1ç¾¤**ï¼š692635772 
- **2ç¾¤**ï¼š785620313
- **3ç¾¤**ï¼š316239544
- **4ç¾¤**ï¼š1027678459

## ğŸ“± å¾®ä¿¡å…¬ä¼—å·
![äºŒç»´ç ](assets/wechat.png)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… æ”¯æŒ Linux/AMD64ã€Linux/ARM64 æ¶æ„
- ğŸ³ Docker å®¹å™¨åŒ–éƒ¨ç½²
- ğŸ“¥ æ”¯æŒ URL ä¸‹è½½ planetã€moon é…ç½®
- ğŸŒ å¯ä½œä¸º Moon æˆ– Planet æœåŠ¡å™¨æ­å»º
- ğŸ”§ ç®€å•æ˜“ç”¨çš„ä¸€é”®éƒ¨ç½²è„šæœ¬
- ğŸ“Š å¯è§†åŒ– Web ç®¡ç†ç•Œé¢

## ğŸ“‹ ç›®å½•

- [0. æ‰˜ç®¡æœåŠ¡](#0-æ‰˜ç®¡æœåŠ¡)
- [1. ZeroTier ä»‹ç»](#1-zerotier-ä»‹ç»)
- [2. ä¸ºä»€ä¹ˆè¦è‡ªå»º PLANET æœåŠ¡å™¨](#2-ä¸ºä»€ä¹ˆè¦è‡ªå»º-planet-æœåŠ¡å™¨)
- [3. å¼€å§‹å®‰è£…](#3-å¼€å§‹å®‰è£…)
  - [3.1 ç¯å¢ƒå‡†å¤‡](#31-ç¯å¢ƒå‡†å¤‡)
  - [3.2 ä¸‹è½½é¡¹ç›®æºç ](#32-ä¸‹è½½é¡¹ç›®æºç )
  - [3.3 æ‰§è¡Œå®‰è£…è„šæœ¬](#33-æ‰§è¡Œå®‰è£…è„šæœ¬)
  - [3.4 ä¸‹è½½ planet æ–‡ä»¶](#34-ä¸‹è½½-planet-æ–‡ä»¶)
  - [3.5 æ–°å»ºç½‘ç»œ](#35-æ–°å»ºç½‘ç»œ)
- [4. å®¢æˆ·ç«¯é…ç½®](#4-å®¢æˆ·ç«¯é…ç½®)
  - [4.1 Windows é…ç½®](#41-windows-é…ç½®)
  - [4.2 Linux å®¢æˆ·ç«¯](#42-linux-å®¢æˆ·ç«¯)
  - [4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®](#43-å®‰å“å®¢æˆ·ç«¯é…ç½®)
  - [4.4 MacOS å®¢æˆ·ç«¯é…ç½®](#44-macos-å®¢æˆ·ç«¯é…ç½®)
  - [4.5 OpenWRT å®¢æˆ·ç«¯é…ç½®](#45-openwrt-å®¢æˆ·ç«¯é…ç½®)
  - [4.6 iOS å®¢æˆ·ç«¯é…ç½®](#46-ios-å®¢æˆ·ç«¯é…ç½®)
- [5. ç®¡ç†é¢æ¿ SSL é…ç½®](#5-ç®¡ç†é¢æ¿-ssl-é…ç½®)
- [6. å¸è½½](#6-å¸è½½)
- [7. å¸¸è§é—®é¢˜](#7-å¸¸è§é—®é¢˜)
- [8. å¼€å‘è®¡åˆ’](#8-å¼€å‘è®¡åˆ’)
- [9. é£é™©å£°æ˜](#9-é£é™©å£°æ˜)
- [10. ç±»ä¼¼é¡¹ç›®](#10-ç±»ä¼¼é¡¹ç›®)
- [11. æåŠ©å’Œæ”¯æŒ](#11-æåŠ©å’Œæ”¯æŒ)
- [12. é¸£è°¢](#12-é¸£è°¢)

---

## 0. æ‰˜ç®¡æœåŠ¡

### 0.1 è‡ªè¿è¥å®¹å™¨æœåŠ¡

**å¯»æ‰¾ä¾¿æ·çš„è§£å†³æ–¹æ¡ˆï¼Ÿ**

æˆ‘ä»¬æä¾›ä¸“ä¸šçš„æ‰˜ç®¡æœåŠ¡ï¼š

| æœåŠ¡é¡¹ç›® | è¯¦æƒ… |
|---------|------|
| **è¯•ç”¨æœŸ** | å…è´¹è¯•ç”¨ 3 å¤© |
| **å¹´è´¹** | ä»…éœ€ 99ï¿¥ |
| **å¸¦å®½** | é«˜é€Ÿå¸¦å®½ 300Mbit |
| **æµé‡æ”¿ç­–** | æ¯æœˆ 100G è½¬å‘æµé‡ï¼ŒP2P è¿æ¥åä¸è®¡æµé‡ï¼Œè¶…å‡ºåæ¯ 10 å…ƒ 100G |
| **æœºæˆ¿** | ä¼˜è´¨çº¿è·¯ï¼šå®æ³¢ç”µä¿¡æœºæˆ¿ |
| **è”ç³»æ–¹å¼** | Telegramï¼š[https://t.me/uxkram](https://t.me/uxkram) æˆ–åŠ å…¥ QQ ç¾¤å’¨è¯¢ç¾¤ä¸» |

**æµ‹é€Ÿå›¾å¦‚ä¸‹ï¼š**

<img src="./assets/nb-speed-test.png" width="800" alt="å®æ³¢æœºæˆ¿æµ‹é€Ÿå›¾" align="center" />

### 0.2 é›¨äº‘å®¹å™¨æœåŠ¡

[![é€šè¿‡é›¨äº‘ä¸€é”®éƒ¨ç½²](https://rainyun-apps.cn-nb1.rains3.com/materials/deploy-on-rainyun-cn.svg)](https://app.rainyun.com/apps/rca/store/6215?ref=220429)

### 0.3 å¾®ä¿¡å…¬ä¼—å·

æ¬¢è¿å…³æ³¨å…¬ä¼—å·è·å–æœ€æ–°åŠ¨æ€å’ŒæŠ€æœ¯åˆ†äº«

<img src="./assets/wx_qrcode_pub.jpg" width="300" alt="å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç " align="center" />

---

## 1. ZeroTier ä»‹ç»

`ZeroTier` æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ P2P VPN å·¥å…·ï¼Œå®ƒèƒ½è®©ä½ åœ¨äº’è”ç½‘ä¸Šæ­å»ºå±äºè‡ªå·±çš„è™šæ‹Ÿå±€åŸŸç½‘ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥è½»æ¾å®ç°è¿œç¨‹è®¿é—®å®¶ä¸­è®¾å¤‡çš„éœ€æ±‚ - æ¯”å¦‚åœ¨å…¬å¸ç”¨æ‰‹æœºç›´æ¥è®¿é—®å®¶é‡Œçš„ NASã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè®¾å¤‡ä¹‹é—´æ˜¯ç‚¹å¯¹ç‚¹ç›´è¿çš„ï¼Œæ— éœ€ç»è¿‡ä¸­è½¬æœåŠ¡å™¨ï¼Œæ—¢ä¿è¯äº†é€Ÿåº¦ï¼Œåˆæå‡äº†å®‰å…¨æ€§ã€‚

### å·¥ä½œåŸç†

é€šè¿‡ `ZeroTier One` å®¢æˆ·ç«¯ï¼Œåœ¨ä¸åŒè®¾å¤‡ï¼ˆå¦‚ç¬”è®°æœ¬ã€æ‰‹æœºã€æœåŠ¡å™¨ç­‰ï¼‰ä¹‹é—´å»ºç«‹ P2P è¿æ¥ï¼Œå³ä½¿è¿™äº›è®¾å¤‡éƒ½åœ¨ NAT åé¢ä¹Ÿæ²¡é—®é¢˜ã€‚å®ƒä½¿ç”¨äº† STUN ç­‰æŠ€æœ¯ï¼Œå¯ä»¥ç©¿é€å¤§å¤šæ•°ç±»å‹çš„ NATï¼Œå®ç°è®¾å¤‡é—´çš„ç›´æ¥é€šä¿¡ã€‚å¦‚æœå®åœ¨æ— æ³•ç›´è¿ï¼Œæ‰ä¼šé€šè¿‡ä¸­è½¬æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚

ç®€å•æ¥è¯´ï¼Œ`ZeroTier` å°±åƒæ˜¯ä¸€ä¸ªè·¨è¶Šäº’è”ç½‘çš„"è™šæ‹Ÿäº¤æ¢æœº"ï¼Œè®©åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„è®¾å¤‡ï¼Œéƒ½èƒ½åƒåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ä¸€æ ·æ–¹ä¾¿åœ°ç›¸äº’è®¿é—®ã€‚

![zerotier](assets/zerotier-network.png)

### ZeroTier ç½‘ç»œä¸­çš„å…³é”®æ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **PLANET**ï¼ˆè¡Œæ˜ŸæœåŠ¡å™¨ï¼‰ | ZeroTier ç½‘ç»œçš„æ ¸å¿ƒæ ¹æœåŠ¡å™¨ï¼Œè´Ÿè´£ç½‘ç»œå‘ç°å’Œåˆå§‹è¿æ¥ã€‚ç›¸å½“äºæ•´ä¸ªç½‘ç»œçš„"ä¸­æ¢" |
| **MOON**ï¼ˆå«æ˜ŸæœåŠ¡å™¨ï¼‰ | ç”¨æˆ·å¯ä»¥è‡ªå»ºçš„ç§æœ‰æ ¹æœåŠ¡å™¨ã€‚å®ƒå¯ä»¥ä½œä¸ºåŒºåŸŸæ€§çš„ä»£ç†èŠ‚ç‚¹ï¼Œå¸®åŠ©å°±è¿‘çš„è®¾å¤‡æ›´å¿«åœ°å»ºç«‹è¿æ¥ï¼Œæå‡ç½‘ç»œæ€§èƒ½ |
| **LEAF**ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ | æ‰€æœ‰æ¥å…¥ ZeroTier ç½‘ç»œçš„ç»ˆç«¯è®¾å¤‡ï¼Œå¦‚ç”µè„‘ã€æ‰‹æœºã€æœåŠ¡å™¨ç­‰ã€‚è¿™äº›è®¾å¤‡é€šè¿‡ PLANET å’Œ MOON çš„åè°ƒæ¥ç›¸äº’å‘ç°å’Œé€šä¿¡ |

æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨æ­å»ºä¸€ä¸ªç§æœ‰çš„ PLANET æœåŠ¡å™¨ï¼Œè®©æ‚¨å®Œå…¨æŒæ§è‡ªå·±çš„ ZeroTier ç½‘ç»œã€‚

---

## 2. ä¸ºä»€ä¹ˆè¦è‡ªå»º PLANET æœåŠ¡å™¨

è‡ªå»º PLANET æœåŠ¡å™¨æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦åŸå› ï¼š

### ğŸš€ æ€§èƒ½ä¼˜åŠ¿
- **æå‡ç½‘ç»œç¨³å®šæ€§**ï¼šå®˜æ–¹æœåŠ¡å™¨ä½äºæµ·å¤–ï¼Œå›½å†…ç”¨æˆ·è®¿é—®å»¶è¿Ÿé«˜ä¸”ä¸ç¨³å®šã€‚è‡ªå»ºæœåŠ¡å™¨å¯ä»¥å¤§å¹…æå‡è¿æ¥è´¨é‡
- **åŠ å¿«è¿æ¥é€Ÿåº¦**ï¼šæœ¬åœ°åŒ–çš„ PLANET æœåŠ¡å™¨å¯ä»¥æ›´å¿«åœ°å¸®åŠ©è®¾å¤‡å»ºç«‹ P2P è¿æ¥

### ğŸ”’ å®‰å…¨ä¼˜åŠ¿
- **å¢å¼ºç½‘ç»œæ§åˆ¶**ï¼šè‡ªå»ºæœåŠ¡å™¨è®©æ‚¨å®Œå…¨æŒæ§ç½‘ç»œé…ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œä¼˜åŒ–è°ƒæ•´
- **æé«˜å®‰å…¨æ€§**ï¼šç§æœ‰åŒ–éƒ¨ç½²æ„å‘³ç€ç½‘ç»œæµé‡ä¸ç»è¿‡ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œæ›´åŠ å®‰å…¨å¯é 

### ğŸ’ª å¯é æ€§ä¼˜åŠ¿
- **é™ä½ä¾èµ–**ï¼šé¿å…å› å®˜æ–¹æœåŠ¡å™¨æ•…éšœæˆ–ç½‘ç»œæ³¢åŠ¨å½±å“æ‚¨çš„ä¸šåŠ¡æ­£å¸¸è¿è¡Œ

---

## 3. å¼€å§‹å®‰è£…

### 3.1 ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹å®‰è£…ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœåŠ¡å™¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

#### æœåŠ¡å™¨è¦æ±‚
- âœ… æ‹¥æœ‰å…¬ç½‘ IP åœ°å€
- âœ… éœ€å¼€æ”¾ä»¥ä¸‹ç«¯å£ï¼š
  - `3443/tcp` (ç®¡ç†é¢æ¿ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)
  - `9994/tcp` (ZeroTier é€šä¿¡ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)
  - `9994/udp` (ZeroTier é€šä¿¡ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)

#### è½¯ä»¶ä¾èµ–
- âœ… Docker (å®¹å™¨è¿è¡Œç¯å¢ƒ)
- âœ… Git (è·å–é¡¹ç›®ä»£ç )

#### ç³»ç»Ÿè¦æ±‚
æ¨èä½¿ç”¨è¾ƒæ–°çš„ Linux å‘è¡Œç‰ˆï¼š
- Debian 12
- Ubuntu 20.04+
- Rocky Linux
- å…¶ä»–åŒç±»ç³»ç»Ÿ

#### 3.1.1 å®‰è£… Git

```bash
# Debian/Ubuntu ç­‰
apt update && apt install git -y 

# CentOS ç­‰
yum update && yum install git -y 
```

#### 3.1.2 å®‰è£… Docker

```bash
curl -fsSL https://get.docker.com | bash
```

> **æ³¨æ„**ï¼šå¦‚æœç½‘ç»œé—®é¢˜å¯¼è‡´æ— æ³•å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒå®‰è£…ï¼Œè¯·å‚è€ƒï¼š[å®‰è£… Docker](https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker#33f11a5f1800n)

#### 3.1.3 å¯åŠ¨ Docker

```bash
service docker start
```

#### 3.1.4 é…ç½® Docker åŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼‰

```bash
sudo tee /etc/docker/daemon.json <<EOF
{
    "registry-mirrors": [
        "https://docker.mirrors.aster.edu.pl",
        "https://docker.mirrors.imoyuapp.win"
    ]
}
EOF

sudo systemctl daemon-reload
sudo systemctl restart docker
```

### 3.2 ä¸‹è½½é¡¹ç›®æºç 

**å®˜æ–¹åœ°å€ï¼š**
```bash
git clone https://github.com/xubiaolin/docker-zerotier-planet.git
```

**åŠ é€Ÿåœ°å€ï¼š**
```bash
git clone https://ghproxy.imoyuapp.win/https://github.com/xubiaolin/docker-zerotier-planet.git
```

### 3.3 æ‰§è¡Œå®‰è£…è„šæœ¬

1. **è¿›å…¥é¡¹ç›®ç›®å½•ï¼š**
```bash
cd docker-zerotier-planet
```

2. **è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼š**
```bash
./deploy.sh
```

3. **æ ¹æ®æç¤ºé€‰æ‹©æ“ä½œï¼š**
```
æ¬¢è¿ä½¿ç”¨ zerotier-planet è„šæœ¬ï¼Œè¯·é€‰æ‹©éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼š
1. å®‰è£…
2. å¸è½½
3. æ›´æ–°
4. æŸ¥çœ‹ä¿¡æ¯
5. é€€å‡º
è¯·è¾“å…¥æ•°å­—ï¼š
```

> **æç¤º**ï¼šæ•´ä¸ªè„šæœ¬é¢„è®¡éœ€è¦ 1-3 åˆ†é’Ÿï¼Œå…·ä½“æ—¶é—´å–å†³äºç½‘ç»œä¸æœºå‹

4. **å®‰è£…æˆåŠŸæ ‡å¿—ï¼š**

![install-finish](./assets/install_finish.png)

### 3.4 ä¸‹è½½ planet æ–‡ä»¶

è„šæœ¬è¿è¡Œå®Œæˆåï¼Œä¼šåœ¨ `./data/zerotier/dist` ç›®å½•ä¸‹ç”Ÿæˆ `planet` å’Œ `moon` é…ç½®æ–‡ä»¶ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è·å–è¿™äº›æ–‡ä»¶ï¼š

1. **é€šè¿‡å®‰è£…å®Œæˆåæä¾›çš„ URL ç›´æ¥ä¸‹è½½**
2. **ä½¿ç”¨ scp æˆ–å…¶ä»–æ–‡ä»¶ä¼ è¾“å·¥å…·ä»æœåŠ¡å™¨ä¸‹è½½**

> **é‡è¦**ï¼šè¯·å¦¥å–„ä¿å­˜è¿™äº›æ–‡ä»¶ï¼Œåç»­é…ç½®å®¢æˆ·ç«¯æ—¶ä¼šç”¨åˆ°ã€‚

### 3.5 æ–°å»ºç½‘ç»œ

#### 3.5.1 è®¿é—®ç®¡ç†ç•Œé¢

è®¿é—® `http://ip:3443` è¿›å…¥ controller é¡µé¢

![ui](assets/ztncui.png)

**é»˜è®¤ç™»å½•ä¿¡æ¯ï¼š**
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`password`

#### 3.5.2 åˆ›å»ºç½‘ç»œ

1. ç™»å½•åç‚¹å‡» "Networks" èœå•
2. ç‚¹å‡» "Add Network" æŒ‰é’®åˆ›å»ºæ–°ç½‘ç»œ
3. è¾“å…¥ä¸€ä¸ªä¾¿äºè¯†åˆ«çš„ç½‘ç»œåç§°ï¼Œå…¶ä»–é€‰é¡¹å¯ä¿æŒé»˜è®¤
4. ç‚¹å‡» "Create Network" æŒ‰é’®å®Œæˆåˆ›å»º

![ui](assets/ztncui_create_net.png)

åˆ›å»ºæˆåŠŸåç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç½‘ç»œ IDï¼Œè¿™ä¸ª ID åœ¨åç»­å®¢æˆ·ç«¯é…ç½®æ—¶ä¼šç”¨åˆ°ï¼Œè¯·è®°å½•ä¸‹æ¥ã€‚

![ui](assets/ztncui_net_id.png)

#### 3.5.3 åˆ†é…ç½‘ç»œ IP

1. é€‰ä¸­ "Easy Setup"
![assign_id](./assets/easy_setup.png)

2. ç”Ÿæˆ IP èŒƒå›´
![ip_addr](./assets/network_addr.png)

---

## 4. å®¢æˆ·ç«¯é…ç½®

ZeroTier æ”¯æŒå¤šç§ä¸»æµæ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬ï¼š
- Windows
- macOS 
- Linux
- Android

### 4.1 Windows é…ç½®

#### æ­¥éª¤ 1ï¼šä¸‹è½½å®¢æˆ·ç«¯
é¦–å…ˆå» ZeroTier å®˜ç½‘ä¸‹è½½ä¸€ä¸ª ZeroTier å®¢æˆ·ç«¯

#### æ­¥éª¤ 2ï¼šæ›¿æ¢ planet æ–‡ä»¶
å°† `planet` æ–‡ä»¶è¦†ç›–ç²˜è´´åˆ° `C:\ProgramData\ZeroTier\One` ä¸­ï¼ˆè¿™ä¸ªç›®å½•æ˜¯ä¸ªéšè—ç›®å½•ï¼Œéœ€è¦å…è®¸æŸ¥çœ‹éšè—ç›®å½•æ‰è¡Œï¼‰

#### æ­¥éª¤ 3ï¼šé‡å¯æœåŠ¡
1. æŒ‰ `Win + S` æœç´¢ "æœåŠ¡"
![ui](assets/service.png)

2. æ‰¾åˆ° ZeroTier Oneï¼Œå¹¶ä¸”é‡å¯æœåŠ¡
![ui](assets/restart_service.png)

#### æ­¥éª¤ 4ï¼šåŠ å…¥ç½‘ç»œ
ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShellï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```powershell
PS C:\Windows\system32> zerotier-cli.bat join ç½‘ç»œid
200 join OK
PS C:\Windows\system32>
```

> **æ³¨æ„**ï¼šç½‘ç»œ ID å°±æ˜¯åœ¨ç½‘é¡µé‡Œé¢åˆ›å»ºçš„é‚£ä¸ªç½‘ç»œ ID

#### æ­¥éª¤ 5ï¼šæˆæƒè®¾å¤‡
ç™»å½•ç®¡ç†åå°å¯ä»¥çœ‹åˆ°æœ‰ä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼Œå‹¾é€‰ `Authorized` å³å¯

![ui](assets/join_net.png)

IP assignment é‡Œé¢ä¼šå‡ºç° ZeroTier çš„å†…ç½‘ IP

![ip](./assets/allow_devices.png)

#### æ­¥éª¤ 6ï¼šéªŒè¯è¿æ¥
æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éªŒè¯è¿æ¥çŠ¶æ€ï¼š

```powershell
PS C:\Windows\system32> zerotier-cli.bat peers
200 peers
<ztaddr>   <ver>  <role> <lat> <link> <lastTX> <lastRX> <path>
fcbaeb9b6c 1.8.7  PLANET    52 DIRECT 16       8994     1.1.1.1/9993
fe92971aad 1.8.7  LEAF      14 DIRECT -1       4150     2.2.2.2/9993
PS C:\Windows\system32>
```

å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª `PLANET` å’Œ `LEAF` è§’è‰²ï¼Œè¿æ¥æ–¹å¼å‡ä¸º `DIRECT`ï¼ˆç›´è¿ï¼‰

åˆ°è¿™é‡Œå°±åŠ å…¥ç½‘ç»œæˆåŠŸäº†ï¼

### 4.2 Linux å®¢æˆ·ç«¯

**é…ç½®æ­¥éª¤ï¼š**

1. å®‰è£… Linux å®¢æˆ·ç«¯è½¯ä»¶
2. è¿›å…¥ç›®å½• `/var/lib/zerotier-one`
3. æ›¿æ¢ç›®å½•ä¸‹çš„ `planet` æ–‡ä»¶
4. é‡å¯ `zerotier-one` æœåŠ¡ï¼š`service zerotier-one restart`
5. åŠ å…¥ç½‘ç»œï¼š`zerotier-cli join ç½‘ç»œid`
6. ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚
7. æ‰§è¡Œ `zerotier-cli peers` å¯ä»¥çœ‹åˆ° `PLANET` è§’è‰²

### 4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®

æ¨èä½¿ç”¨ [Zerotier éå®˜æ–¹å®‰å“å®¢æˆ·ç«¯](https://github.com/kaaass/ZerotierFix)

### 4.4 MacOS å®¢æˆ·ç«¯é…ç½®

**é…ç½®æ­¥éª¤ï¼š**

1. è¿›å…¥ `/Library/Application\ Support/ZeroTier/One/` ç›®å½•ï¼Œå¹¶æ›¿æ¢ç›®å½•ä¸‹çš„ `planet` æ–‡ä»¶
2. é‡å¯ ZeroTier-Oneï¼š`cat /Library/Application\ Support/ZeroTier/One/zerotier-one.pid | sudo xargs kill`
3. åŠ å…¥ç½‘ç»œï¼š`zerotier-cli join ç½‘ç»œid`
4. ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚
5. æ‰§è¡Œ `zerotier-cli peers` å¯ä»¥çœ‹åˆ° `PLANET` è§’è‰²

### 4.5 OpenWRT å®¢æˆ·ç«¯é…ç½®

**é…ç½®æ­¥éª¤ï¼š**

1. å®‰è£… ZeroTier å®¢æˆ·ç«¯
2. è¿›å…¥ç›®å½• `/etc/config/zero/planet`
3. æ›¿æ¢ç›®å½•ä¸‹çš„ `planet` æ–‡ä»¶
4. åœ¨ OpenWRT ç½‘é¡µåå°å…ˆå…³é—­ ZeroTier æœåŠ¡ï¼Œå†å¼€å¯ ZeroTier æœåŠ¡
5. åœ¨ OpenWRT ç½‘é¡µåå°åŠ å…¥ç½‘ç»œ
6. ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚
7. æ‰§è¡Œ `ln -s /etc/config/zero /var/lib/zerotier-one`
8. æ‰§è¡Œ `zerotier-cli peers` å¯ä»¥çœ‹åˆ° `PLANET` è§’è‰²

### 4.6 iOS å®¢æˆ·ç«¯é…ç½®

**æ–¹æ¡ˆä¸€ï¼šè¶Šç‹±æ–¹æ¡ˆ**
è¶Šç‹±åå®‰è£… ZeroTierï¼Œç„¶åæ›¿æ¢ `planet` æ–‡ä»¶

**æ–¹æ¡ˆäºŒï¼šWireGuard æ–¹æ¡ˆ**
ä½¿ç”¨ WireGuard æ¥å…¥åˆ° ZeroTier ç½‘ç»œ

---

## 5. ç®¡ç†é¢æ¿ SSL é…ç½®

ç®¡ç†é¢æ¿çš„ SSL æ”¯æŒéœ€è¦è‡ªè¡Œé…ç½®ï¼Œå‚è€ƒ Nginx é…ç½®å¦‚ä¸‹ï¼š

```nginx
upstream zerotier {
  server 127.0.0.1:3443;
}

server {
  listen 443 ssl;
  server_name {CUSTOM_DOMAIN}; # æ›¿æ¢è‡ªå·±çš„åŸŸå

  # SSL è¯ä¹¦åœ°å€
  ssl_certificate    pem æˆ– crt æ–‡ä»¶çš„è·¯å¾„;
  ssl_certificate_key key æ–‡ä»¶çš„è·¯å¾„;

  # SSL éªŒè¯ç›¸å…³é…ç½®
  ssl_session_timeout  5m;    # ç¼“å­˜æœ‰æ•ˆæœŸ
  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    # åŠ å¯†ç®—æ³•
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    # å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®
  ssl_prefer_server_ciphers on;   # ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•

  location / {
    proxy_pass http://zerotier;
    proxy_set_header HOST $host;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}

server {
    listen       80;
    server_name  {CUSTOM_DOMAIN}; # æ›¿æ¢è‡ªå·±çš„åŸŸå
    return 301 https://$server_name$request_uri;
}
```

---

## 6. å¸è½½

```bash
docker rm -f zerotier-planet
```

---

## 7. å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæˆ‘ ping ä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ
**A:** è¯·æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œ`Windows` ç³»ç»Ÿéœ€è¦å…è®¸ `ICMP` å…¥ç«™ï¼Œ`Linux` åŒç†

### Q2: iOS å®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ
**A:** iOS å®¢æˆ·ç«¯æ’ä»¶åœ¨è¿™é‡Œï¼Œè®¾å¤‡éœ€è¦è¶Šç‹±ï¼šhttps://github.com/lemon4ex/ZeroTieriOSFix

### Q3: ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„ Planetï¼Ÿ
**A:** è¯¥é¡¹ç›®å‰”é™¤äº†å®˜æ–¹æœåŠ¡å™¨ï¼Œåªä¿ç•™äº†è‡ªå®šä¹‰çš„ Planet èŠ‚ç‚¹

### Q4: æˆ‘æ›´æ¢äº† IP éœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ
**A:** å¦‚æœ IP æ›´æ¢äº†ï¼Œåˆ™éœ€è¦é‡æ–°éƒ¨ç½²ï¼Œç›¸å½“äºå…¨æ–°éƒ¨ç½²

### Q5: PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡ï¼Ÿ
**A:** éœ€è¦ä¿®æ”¹ lxc å®¹å™¨çš„é…ç½®ï¼ŒåŒæ—¶ lxc å®¹å™¨éœ€è¦å–æ¶ˆå‹¾é€‰"æ— ç‰¹æƒ"

é…ç½®æ–‡ä»¶ä½ç½®åœ¨ `/etc/pve/lxc/{ID}.conf`

**Proxmox 7.0 ä¹‹å‰çš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š**
```
lxc.cgroup.devices.allow: c 10:200 rwm
lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file
```

**Proxmox 7.0 ä¹‹åçš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š**
```
lxc.cgroup2.devices.allow: c 10:200 rwm
lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file
```

### Q6: ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ
**A:** æ‰§è¡Œ `./deploy.sh`ï¼Œé€‰æ‹©é‡ç½®å¯†ç å³å¯

### Q7: ä¸ºä»€ä¹ˆè¿ä¸ä¸Š planetï¼Ÿ
**A:** è¯·æ£€æŸ¥é˜²ç«å¢™ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç”¨æˆ·ï¼Œéœ€è¦åœ¨å¯¹åº”å¹³å°åå°é˜²ç«å¢™æ”¾è¡Œç«¯å£ã€‚Linux æœºå™¨ä¸Šä¹Ÿè¦æ”¾è¡Œï¼Œå¦‚æœå®‰è£…äº† ufw ç­‰é˜²ç«å¢™å·¥å…·ã€‚

### Q8: å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬ï¼Ÿ
**A:** ç®¡ç†å‘˜æƒé™æ‰§è¡Œç»ˆç«¯ï¼Œè¿è¡Œ `zerotier-cli peers`

```
<ztaddr>   <ver>  <role> <lat> <link>   <lastTX> <lastRX> <path>
69c0d507d0 -      LEAF      -1 RELAY
93caa675b0 1.12.2 PLANET  -894 DIRECT   4142     4068     110.42.99.46/9994
ab403e2074 1.10.2 LEAF      -1 RELAY
```

å¦‚æœä½ çš„ ztaddr æ˜¯ `RELAY`ï¼Œå°±è¯´æ˜æ˜¯ä¸­è½¬

### Q9: ä¸ºä»€ä¹ˆæˆ‘çš„ ZeroTier ä¼ è¾“ä¸ç¨³å®šï¼Ÿ
**A:** ç”±äº ZeroTier ä½¿ç”¨çš„æ˜¯ UDP åè®®ï¼Œéƒ¨åˆ†åœ°åŒºå¯èƒ½å¯¹ UDP è¿›è¡Œäº† QoSï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ OpenVPNã€‚

### Q10: æ”¯æŒåŸŸåå—ï¼Ÿ
**A:** æš‚ä¸æ”¯æŒ

### Q11: ARM æœåŠ¡å™¨å¯ä»¥æ­å»ºå—ï¼Ÿ
**A:** å¯ä»¥

### Q12: æ”¯æŒ docker-compose å¯åŠ¨éƒ¨ç½²å—ï¼Ÿ
**A:** æ”¯æŒï¼Œå‚è€ƒ docker-compose æ–‡ä»¶å¦‚ä¸‹ï¼š

```yaml
version: '3'

services:
  myztplanet:
    image: xubiaolin/zerotier-planet:latest
    container_name: ztplanet
    ports:
      - 9994:9994
      - 9994:9994/udp
      - 3443:3443
      - 3000:3000
    environment:
      - IP_ADDR4=[IPV4IP ADDRESS]
      - IP_ADDR6=
      - ZT_PORT=9994
      - API_PORT=3443
      - FILE_SERVER_PORT=3000
    volumes:
      - ./data/zerotier/dist:/app/dist
      - ./data/zerotier/ztncui:/app/ztncui
      - ./data/zerotier/one:/var/lib/zerotier-one
      - ./data/zerotier/config:/app/config
    restart: unless-stopped
```

---

## 8. å¼€å‘è®¡åˆ’

ğŸ¥° æ‚¨çš„æåŠ©å¯ä»¥è®©å¼€å‘è®¡åˆ’çš„é€Ÿåº¦æ›´å¿« ğŸ¥°

- [ ] å¤š planet æ”¯æŒ
- [x] 3443 ç«¯å£è‡ªå®šä¹‰æ”¯æŒ
- [ ] planet å’Œ controller åˆ†ç¦»éƒ¨ç½²

---

## 9. é£é™©å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸é¼“åŠ±ç”¨äºå•†ä¸šç”¨é€”ã€‚æˆ‘ä»¬ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬é¡¹ç›®è€Œå¯¼è‡´çš„ä»»ä½•æŸå¤±è´Ÿè´£ã€‚

---

## 10. ç±»ä¼¼é¡¹ç›®

- [WireGuard ä¸€é”®è„šæœ¬](https://github.com/xubiaolin/wireguard-onekey)

---

## 11. æåŠ©å’Œæ”¯æŒ

å¦‚æœè§‰å¾—æœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡æ‰«æä¸‹æ–¹èµèµç æåŠ©é¡¹ç›® :)

<img src="assets/donate.png" alt="donate" width="400" height="400" />

---

## 12. é¸£è°¢

æ„Ÿè°¢ä»¥ä¸‹ç½‘å‹æŠ•å–‚ï¼Œä½ ä»¬çš„æ”¯æŒå’Œé¼“åŠ±æ˜¯æˆ‘ä¸æ‡ˆæ›´æ–°çš„åŠ¨åŠ›

**æŒ‰æ—¶é—´é¡ºåºæ’åºï¼š**
- éšæ€§
- æˆ‘
- ä½ å¥½
- Calvin
- å°çŒªçŒªçš„é¥²å…»å‘˜
- æƒ…è‹¥çŠ¹åœ¨
- å¤©å¤©æ˜ŸæœŸå¤©
- å•Šä¹
- å¤æœ«ç§‹è‡³
- **å¿ 
- å²¸èŠ·æ±€å…°
- Kimi Chen
- åŒ¿å
- é˜³å…‰æŠ¥å‘Šæ—·è¯¾
- æ¿‚æºªå…ˆç”Ÿ
- Water
- åŒ¿å
- åŒ¿å
- é™†
- ç²¾é’¢è‘«èŠ¦å¨ƒ
- å”¯
- ç‹å°æ–°
- åŒ¿å
- Duckä¸å¿…

---

## ğŸ“š å‚è€ƒé“¾æ¥

- [ZeroTier-è™šæ‹Ÿå±€åŸŸç½‘è¯¦è§£](https://www.glimmer.ltd/2021/3299983056/)
- [äº”åˆ†é’Ÿè‡ªå»º ZeroTier çš„ Planet/Controller](https://v2ex.com/t/799623)