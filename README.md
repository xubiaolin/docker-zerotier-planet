TGäº¤æµç¾¤ï¼šhttps://t.me/+JduuWfhSEPdlNDk1

QQäº¤æµç¾¤ï¼š692635772



- [0: å¹¿å‘Š](#0-å¹¿å‘Š)
- [1ï¼šZeroTier ä»‹ç»](#1zerotier-ä»‹ç»)
- [2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET æœåŠ¡å™¨](#2ä¸ºä»€ä¹ˆè¦è‡ªå»ºplanet-æœåŠ¡å™¨)
- [3ï¼šå¼€å§‹å®‰è£…](#3å¼€å§‹å®‰è£…)
  - [3.1ï¼šå‡†å¤‡æ¡ä»¶](#31å‡†å¤‡æ¡ä»¶)
    - [3.1.1 å®‰è£…git](#311-å®‰è£…git)
    - [3.1.2 å®‰è£…docker](#312-å®‰è£…docker)
    - [3.1.3 å¯åŠ¨docker](#313-å¯åŠ¨docker)
  - [3.2ï¼šä¸‹è½½é¡¹ç›®æºç ](#32ä¸‹è½½é¡¹ç›®æºç )
  - [3.3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬](#33æ‰§è¡Œå®‰è£…è„šæœ¬)
  - [3.4 ä¸‹è½½ `planet` æ–‡ä»¶](#34-ä¸‹è½½-planet-æ–‡ä»¶)
  - [3.5 æ–°å»ºç½‘ç»œ](#35-æ–°å»ºç½‘ç»œ)
    - [3.5.1 åˆ›å»ºç½‘ç»œ](#351-åˆ›å»ºç½‘ç»œ)
    - [3.5.2 åˆ†é…ç½‘ç»œIP:](#352-åˆ†é…ç½‘ç»œip)
- [4.å®¢æˆ·ç«¯é…ç½®](#4å®¢æˆ·ç«¯é…ç½®)
  - [4.1 Windows é…ç½®](#41-windows-é…ç½®)
    - [4.2 åŠ å…¥ç½‘ç»œ](#42-åŠ å…¥ç½‘ç»œ)
  - [4.2 Linux å®¢æˆ·ç«¯](#42-linux-å®¢æˆ·ç«¯)
  - [4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®](#43-å®‰å“å®¢æˆ·ç«¯é…ç½®)
  - [4.4 MacOS å®¢æˆ·ç«¯é…ç½®](#44-macos-å®¢æˆ·ç«¯é…ç½®)
- [å‚è€ƒé“¾æ¥](#å‚è€ƒé“¾æ¥)
- [5. ç®¡ç†é¢æ¿SSLé…ç½®](#5-ç®¡ç†é¢æ¿sslé…ç½®)
- [6. å¸è½½](#6-å¸è½½)
- [7: Q\&Aï¼š](#7-qa)
  - [1. ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ](#1-ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨)
  - [2. IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ](#2-ioså®¢æˆ·ç«¯æ€ä¹ˆç”¨)
  - [3. ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet](#3-ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„planet)
  - [4. æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ](#4-æˆ‘æ›´æ¢äº†ipéœ€è¦æ€ä¹ˆå¤„ç†)
  - [5. PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡](#5-pve-lxc-å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡)
  - [6. ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š](#6-ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠ)
  - [7. ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet](#7-ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet)
  - [8. å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬](#8-å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬)
  - [9. ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š](#9-ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š)
  - [10.æ”¯æŒåŸŸåå—ï¼Ÿ](#10æ”¯æŒåŸŸåå—)
  - [11. ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—](#11-armæœåŠ¡å™¨å¯ä»¥æ­å»ºå—)
  - [12. æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—](#12-æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—)
- [å¼€å‘è®¡åˆ’](#å¼€å‘è®¡åˆ’)
- [é£é™©å£°æ˜](#é£é™©å£°æ˜)
- [ç±»ä¼¼é¡¹ç›®](#ç±»ä¼¼é¡¹ç›®)
- [æåŠ©å’Œæ”¯æŒ](#æåŠ©å’Œæ”¯æŒ)

# 0: å¹¿å‘Š
**ä¸æƒ³è‡ªå·±æ­å»º?**

å¯ä»¥åŠ ç¾¤è”ç³»ç¾¤ä¸»æŒ‰æœˆè´­ä¹°ç°æˆæœåŠ¡,æˆ–è€…æ·»åŠ tg: [https://t.me/uxkram](https://t.me/uxkram)

æœˆä»˜ä½è‡³10ï¿¥ï¼Œå¹´ä»˜ä½è‡³100ï¿¥
| å¸¦å®½    | æµé‡ | è´¹ç”¨ï¼ˆæ¯æœˆï¼‰ |
| ------- | ---- | ------------ |
| 5Mbit   | 100G | 8ï¿¥           |
| 10Mbit  | 100G | 15ï¿¥          |
| 30Mbit  | 100G | 30ï¿¥          |
| 50Mbit  | 100G | 58ï¿¥          |
| 100Mbit | 100G | 98ï¿¥          |
| 200Mbit | 100G | 168ï¿¥         |

æµé‡è¶…å‡ºå10ï¿¥å¯è´­ä¹°100G

çº¿è·¯ä¸ºå®æ³¢ç”µä¿¡

æµ‹é€Ÿå›¾å¦‚ä¸‹ï¼š

<img src="./asserts/nb-speed-test.png" width = "800" height = "" alt="å›¾ç‰‡åç§°" align=center />

# 1ï¼šZeroTier ä»‹ç»

`ZeroTier` è¿™ä¸€ç±» P2P VPN æ˜¯åœ¨äº’è”ç½‘çš„åŸºç¡€ä¸Šå°†è‡ªå·±çš„æ‰€æœ‰è®¾å¤‡ç»„æˆä¸€ä¸ªç§æœ‰çš„ç½‘ç»œï¼Œå¯ä»¥ç†è§£ä¸ºäº’è”ç½‘è¿æ¥çš„å±€åŸŸç½‘ã€‚æœ€å¸¸è§çš„åœºæ™¯å°±æ˜¯åœ¨å…¬å¸å¯ä»¥ç”¨æ‰‹æœºç›´æ¥è®¿é—®å®¶é‡Œçš„ NASï¼Œè€Œä¸”æ˜¯ç‚¹å¯¹ç‚¹ç›´è¿ï¼Œæ•°æ®ä¼ è¾“å¹¶ä¸ç»ç”±ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ä¸­è½¬ã€‚

Zerotier åœ¨å¤šè®¾å¤‡ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ª `Peer to Peer VPNï¼ˆP2PVPNï¼‰` è¿æ¥ï¼Œå¦‚ï¼šåœ¨ç¬”è®°æœ¬ç”µè„‘ã€å°å¼æœºã€åµŒå…¥å¼è®¾å¤‡ã€äº‘èµ„æºå’Œåº”ç”¨ã€‚è¿™äº›è®¾å¤‡åªéœ€è¦é€šè¿‡ `ZeroTier One` ( `ZeroTier` çš„å®¢æˆ·ç«¯) åœ¨ä¸åŒè®¾å¤‡ä¹‹é—´å»ºç«‹ç›´æ¥è¿æ¥ï¼Œå³ä½¿å®ƒä»¬ä½äº `NAT` ä¹‹åã€‚è¿æ¥åˆ°è™šæ‹Ÿ LAN çš„ä»»ä½•è®¡ç®—æœºå’Œè®¾å¤‡é€šå¸¸é€šè¿‡ `NAT` æˆ–è·¯ç”±å™¨è®¾å¤‡ä¸ `Internet` è¿æ¥ï¼Œ`ZeroTier One` ä½¿ç”¨ `STUN` å’Œéš§é“æ¥å»ºç«‹ `NAT` åè®¾å¤‡ä¹‹é—´çš„ VPN ç›´è¿ã€‚

ç®€å•ä¸€ç‚¹è¯´ï¼Œ`Zerotier` å°±æ˜¯é€šè¿‡ `P2P` ç­‰æ–¹å¼å®ç°å½¢å¦‚äº¤æ¢æœºæˆ–è·¯ç”±å™¨ä¸Š `LAN`   è®¾å¤‡çš„å†…ç½‘äº’è”ã€‚

![zerotier](asserts/zerotier-network.png)

**ä¸“æœ‰åè¯**

`PLANET` `ï¼šè¡Œæ˜ŸæœåŠ¡å™¨ï¼ŒZerotier` æ ¹æœåŠ¡å™¨

`MOON` ï¼šå«æ˜ŸæœåŠ¡å™¨ï¼Œç”¨æˆ·è‡ªå»ºçš„ç§æœ‰æ ¹æœåŠ¡å™¨ï¼Œèµ·åˆ°ä»£ç†åŠ é€Ÿçš„ä½œç”¨

`LEAF` ï¼šç½‘ç»œå®¢æˆ·ç«¯ï¼Œå°±æ˜¯æ¯å°è¿æ¥åˆ°ç½‘ç»œèŠ‚ç‚¹ã€‚

æˆ‘ä»¬æœ¬æ¬¡æ­å»ºçš„å°±æ˜¯ `PLANET` è¡Œæ˜ŸæœåŠ¡å™¨


# 2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET æœåŠ¡å™¨
ç®€å•æ¥è®²å°±æ˜¯å®˜æ–¹çš„æœåŠ¡å™¨åœ¨æµ·å¤–ï¼Œæˆ‘ä»¬è¿æ¥çš„æ—¶å€™ä¼šå­˜åœ¨ä¸ç¨³å®šçš„æƒ…å†µ


# 3ï¼šå¼€å§‹å®‰è£…
##  3.1ï¼šå‡†å¤‡æ¡ä»¶
- å…·æœ‰å…¬ç½‘ `ip` çš„æœåŠ¡å™¨ï¼ˆéœ€è¦å¼€æ”¾ 3443/tcp ç«¯å£ï¼Œ9993/tcp ç«¯å£ï¼Œ9993/udp ç«¯å£ï¼‰[è¿™é‡Œçš„9993éœ€è¦ä½ æ ¹æ®å®é™…æƒ…å†µæ›¿æ¢]
- å®‰è£… `docker`ã€`git`ï¼Œ

### 3.1.1 å®‰è£…git
```bash
#debian/ubuntuç­‰
apt update && apt install git -y 

#centosç­‰
yum update && yum install git -y 
```

### 3.1.2 å®‰è£…docker
```bash
curl -fsSL https://get.docker.com |bash 
```

### 3.1.3 å¯åŠ¨docker
```bash
service docker start
```
  
## 3.2ï¼šä¸‹è½½é¡¹ç›®æºç 
å®˜æ–¹åœ°å€
```
git clone https://github.com/xubiaolin/docker-zerotier-planet.git
```

åŠ é€Ÿåœ°å€
```
git clone https://ghproxy.markxu.online/https://github.com/xubiaolin/docker-zerotier-planet.git
```

## 3.3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬
è¿›å…¥é¡¹ç›®ç›®å½•
```
cd docker-zerotier-planet
```

è¿è¡Œ `deploy.sh` è„šæœ¬
```
./deploy.sh
```

æ ¹æ®æç¤ºæ¥é€‰æ‹©å³å¯ï¼Œæ“ä½œå®Œæˆåä¼šè‡ªåŠ¨éƒ¨ç½²
```
æ¬¢è¿ä½¿ç”¨zerotier-planetè„šæœ¬ï¼Œè¯·é€‰æ‹©éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼š
1. å®‰è£…
2. å¸è½½
3. æ›´æ–°
4. æŸ¥çœ‹ä¿¡æ¯
5. é€€å‡º
è¯·è¾“å…¥æ•°å­—ï¼š
```

æ•´ä¸ªè„šæœ¬é¢„è®¡éœ€è¦ 1-3 åˆ†é’Ÿ,å…·ä½“éœ€è¦çœ‹ç½‘ç»œä¸æœºå‹


å½“æ‚¨çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹å­—æ ·æ—¶ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ
![install-finish](./asserts/install_finish.png)


## 3.4 ä¸‹è½½ `planet` æ–‡ä»¶
è„šæœ¬è¿è¡Œå®Œæˆåï¼Œä¼šåœ¨ `./data/zerotier/dist` ç›®å½•ä¸‹æœ‰ä¸ª `planet`å’Œ`moon` æ–‡ä»¶

å¯ä»¥ç›´æ¥è®¿é—®å®‰è£…å®Œæˆåçš„urlä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ç”¨scpç­‰å…¶ä»–æ–¹å¼ä¸‹è½½

ä¸‹è½½æ–‡ä»¶å¤‡ç”¨

## 3.5 æ–°å»ºç½‘ç»œ
è®¿é—® `http://ip:3443` è¿›å…¥controlleré¡µé¢

![ui](asserts/ztncui.png)

ä½¿ç”¨é»˜è®¤è´¦å·ä¸º:`admin`

é»˜è®¤å¯†ç ä¸º:`password`

### 3.5.1 åˆ›å»ºç½‘ç»œ
è¿›å…¥ååˆ›å»ºä¸€ä¸ªç½‘ç»œï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç½‘ç»œID

åˆ›å»ºç½‘ç»œï¼Œè¾“å…¥åç§°

![ui](asserts/ztncui_create_net.png)

å¾—åˆ°ç½‘ç»œ `id`

![ui](asserts/ztncui_net_id.png)

### 3.5.2 åˆ†é…ç½‘ç»œIP:
é€‰ä¸­easy setup
![assign_id](./asserts/easy_setup.png)

ç”ŸæˆipèŒƒå›´
![ip_addr](./asserts/network_addr.png)

# 4.å®¢æˆ·ç«¯é…ç½®
å®¢æˆ·ç«¯ä¸»è¦ä¸ºWindows, Mac, Linux, Android

## 4.1 Windows é…ç½®
é¦–å…ˆå»zerotierå®˜ç½‘ä¸‹è½½ä¸€ä¸ªzerotierå®¢æˆ·ç«¯

å°† `planet` æ–‡ä»¶è¦†ç›–ç²˜è´´åˆ°`C:\ProgramData\ZeroTier\One`ä¸­(è¿™ä¸ªç›®å½•æ˜¯ä¸ªéšè—ç›®å½•ï¼Œéœ€è¦è¿å…è®¸æŸ¥çœ‹éšè—ç›®å½•æ‰è¡Œ)

Win+S æœç´¢ `æœåŠ¡`

![ui](asserts/service.png)

æ‰¾åˆ°ZeroTier Oneï¼Œå¹¶ä¸”é‡å¯æœåŠ¡

![ui](asserts/restart_service.png)


### 4.2 åŠ å…¥ç½‘ç»œ
ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShell

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹åˆ°join okå­—æ ·å°±æˆåŠŸäº†
```
PS C:\Windows\system32> zerotier-cli.bat join ç½‘ç»œid(å°±æ˜¯åœ¨ç½‘é¡µé‡Œé¢åˆ›å»ºçš„é‚£ä¸ªç½‘ç»œ)
200 join OK
PS C:\Windows\system32>
```

ç™»å½•ç®¡ç†åå°å¯ä»¥çœ‹åˆ°æœ‰ä¸ªä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼Œå‹¾é€‰`Authorized`å°±è¡Œ

![ui](asserts/join_net.png)

IP assignment é‡Œé¢ä¼šå‡ºç°zerotierçš„å†…ç½‘ip

![ip](./asserts/allow_devices.png)

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
PS C:\Windows\system32> zerotier-cli.bat peers
200 peers
<ztaddr>   <ver>  <role> <lat> <link> <lastTX> <lastRX> <path>
fcbaeb9b6c 1.8.7  PLANET    52 DIRECT 16       8994     1.1.1.1/9993
fe92971aad 1.8.7  LEAF      14 DIRECT -1       4150     2.2.2.2/9993
PS C:\Windows\system32>
```
å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª PLANTET å’Œ LEAF è§’è‰²ï¼Œè¿æ¥æ–¹å¼å‡ä¸º DIRECT(ç›´è¿)

åˆ°è¿™é‡Œå°±åŠ å…¥ç½‘ç»œæˆåŠŸäº†

## 4.2 Linux å®¢æˆ·ç«¯
æ­¥éª¤å¦‚ä¸‹ï¼š

1. å®‰è£…linuxå®¢æˆ·ç«¯è½¯ä»¶
2. è¿›å…¥ç›®å½• `/var/lib/zerotier-one`
3. æ›¿æ¢ç›®å½•ä¸‹çš„ `planet` æ–‡ä»¶
4. é‡å¯ `zerotier-one` æœåŠ¡(`service zerotier-one restart`)
5. åŠ å…¥ç½‘ç»œ `zerotier-cli join` ç½‘ç»œ `id`
6. ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚
7. `zerotier-cli peers` å¯ä»¥çœ‹åˆ°` planet` è§’è‰²

## 4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®
[Zerotier éå®˜æ–¹å®‰å“å®¢æˆ·ç«¯](https://github.com/kaaass/ZerotierFix)

## 4.4 MacOS å®¢æˆ·ç«¯é…ç½®
æ­¥éª¤å¦‚ä¸‹ï¼š

1. è¿›å…¥ `/Library/Application\ Support/ZeroTier/One/` ç›®å½•ï¼Œå¹¶æ›¿æ¢ç›®å½•ä¸‹çš„ `planet` æ–‡ä»¶
2. é‡å¯ ZeroTier-Oneï¼š`cat /Library/Application\ Support/ZeroTier/One/zerotier-one.pid | sudo xargs kill`
3. åŠ å…¥ç½‘ç»œ `zerotier-cli join` ç½‘ç»œ `id`
4. ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚
5. `zerotier-cli peers` å¯ä»¥çœ‹åˆ°` planet` è§’è‰²

# å‚è€ƒé“¾æ¥
[zerotier-è™šæ‹Ÿå±€åŸŸç½‘è¯¦è§£](https://www.glimmer.ltd/2021/3299983056/)

[äº”åˆ†é’Ÿè‡ªå»º ZeroTier çš„ Planet/Controller](https://v2ex.com/t/799623)

# 5. ç®¡ç†é¢æ¿SSLé…ç½®
ç®¡ç†é¢æ¿çš„SSLæ”¯æŒéœ€è¦è‡ªè¡Œé…ç½®ï¼Œå‚è€ƒNginxé…ç½®å¦‚ä¸‹ï¼š
```
upstream zerotier {
  server 127.0.0.1:3443;
}

server {

  listen 443 ssl;

  server_name {CUSTOME_DOMAIN}; #æ›¿æ¢è‡ªå·±çš„åŸŸå

  # sslè¯ä¹¦åœ°å€
  ssl_certificate    pemå’Œæˆ–è€…crtæ–‡ä»¶çš„è·¯å¾„;
  ssl_certificate_key keyæ–‡ä»¶çš„è·¯å¾„;

  # ssléªŒè¯ç›¸å…³é…ç½®
  ssl_session_timeout  5m;    #ç¼“å­˜æœ‰æ•ˆæœŸ
  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    #åŠ å¯†ç®—æ³•
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    #å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®
  ssl_prefer_server_ciphers on;   #ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•


  location / {
    proxy_pass http://zerotier;
    proxy_set_header HOST $host;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

server {
    listen       80;
    server_name  {CUSTOME_DOMAIN}; //æ›¿æ¢è‡ªå·±çš„åŸŸå
    return 301 https://$server_name$request_uri;
}
```

# 6. å¸è½½
```bash
docker rm -f zerotier-planet
```

# 7: Q&Aï¼š
## 1. ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ
è¯·æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œ`Windows` ç³»ç»Ÿéœ€è¦å…è®¸ `ICMP` å…¥ç«™ï¼Œ`Linux` åŒç†

## 2. IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ
iOS å®¢æˆ·ç«¯æ’ä»¶åœ¨è¿™é‡Œï¼Œè®¾å¤‡éœ€è¦è¶Šç‹±ï¼š https://github.com/lemon4ex/ZeroTieriOSFix

## 3. ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet
è¯¥é¡¹ç›®å‰”é™¤äº†å®˜æ–¹æœåŠ¡å™¨ï¼Œåªä¿ç•™äº†è‡ªå®šä¹‰çš„PlanetèŠ‚ç‚¹

## 4. æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ
å¦‚æœIPæ›´æ¢äº†ï¼Œåˆ™éœ€è¦é‡æ–°éƒ¨ç½²ï¼Œç›¸å½“äºå…¨æ–°éƒ¨ç½²

## 5. PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡
éœ€è¦ä¿®æ”¹lxcå®¹å™¨çš„é…ç½®ï¼ŒåŒæ—¶lxcå®¹å™¨éœ€è¦å–æ¶ˆå‹¾é€‰`æ— ç‰¹æƒ`


é…ç½®æ–‡ä»¶ä½ç½®åœ¨`/etc/pve/lxc/{ID}.conf`

åœ¨Proxmox7.0ä¹‹å‰çš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```
lxc.cgroup.devices.allow: c 10:200 rwm
lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file
```
åœ¨Proxmox7.0ä¹‹åçš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```
lxc.cgroup2.devices.allow: c 10:200 rwm
lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file
```

## 6. ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š
å»ºè®®é‡è£…

## 7. ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet
è¯·æ£€æŸ¥é˜²ç«å¢™ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç”¨æˆ·ï¼Œéœ€è¦åœ¨å¯¹åº”å¹³å°åå°é˜²ç«å¢™æ”¾è¡Œç«¯å£ã€‚linuxæœºå™¨ä¸Šä¹Ÿè¦æ”¾è¡Œï¼Œå¦‚æœå®‰è£…äº†ufwç­‰é˜²ç«å¢™å·¥å…·ã€‚

## 8. å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬
ç®¡ç†å‘˜æƒé™æ‰§è¡Œç»ˆç«¯ï¼Œè¿è¡Œ`zerotier-cli peers`
```
<ztaddr>   <ver>  <role> <lat> <link>   <lastTX> <lastRX> <path>
69c0d507d0 -      LEAF      -1 RELAY
93caa675b0 1.12.2 PLANET  -894 DIRECT   4142     4068     110.42.99.46/9994
ab403e2074 1.10.2 LEAF      -1 RELAY
```
å¦‚æœä½ çš„ztaddræ˜¯REPLAY, å°±è¯´æ˜æ˜¯ä¸­è½¬

## 9. ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š
ç”±äºzerotierä½¿ç”¨çš„æ˜¯udpåè®®ï¼Œéƒ¨åˆ†åœ°åŒºå¯èƒ½å¯¹udpè¿›è¡Œäº†qos, å¯ä»¥è€ƒè™‘ä½¿ç”¨openvpnã€‚

## 10.æ”¯æŒåŸŸåå—ï¼Ÿ
æš‚ä¸æ”¯æŒ

## 11. ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—
æš‚ä¸æ”¯æŒ

## 12. æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—
å‚è€ƒdocker-composeæ–‡ä»¶å¦‚ä¸‹

```
version: '3'

services:
  myztplanet:
    #image: xubiaolin/zerotier-planet:latest
    image: golimit/ztplanet:latest
    container_name: ztplanet
    ports:
      - 9994:9994
      - 9994:9994/udp
      - 3443:3443
      - 3000:3000
    environment:
      - IP_ADDR4=[IPV4IP ADDRESS]
      - IP_ADDR6=
      - ZT_PORT=9994
      - API_PORT=3443
      - FILE_SERVER_PORT=3000
    volumes:
      - ./data/zerotier/dist:/app/dist
      - ./data/zerotier/ztncui:/app/ztncui
      - ./data/zerotier/one:/var/lib/zerotier-one
      - ./data/config:/app/config
    restart: unless-stopped

```

# å¼€å‘è®¡åˆ’
ğŸ¥°æ‚¨çš„æåŠ©å¯ä»¥è®©å¼€å‘è®¡åˆ’çš„é€Ÿåº¦æ›´å¿«ğŸ¥°
- [ ] å¤šplanetæ”¯æŒ
- [x] 3443ç«¯å£è‡ªå®šä¹‰æ”¯æŒ
- [ ] planetå’Œcontrolleråˆ†ç¦»éƒ¨ç½²



# é£é™©å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸é¼“åŠ±ç”¨äºå•†ä¸šç”¨é€”ã€‚æˆ‘ä»¬ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬é¡¹ç›®è€Œå¯¼è‡´çš„ä»»ä½•æŸå¤±è´Ÿè´£ã€‚


# ç±»ä¼¼é¡¹ç›®
- [wireguardä¸€é”®è„šæœ¬](https://github.com/xubiaolin/wireguard-onekey)


# æåŠ©å’Œæ”¯æŒ

å¦‚æœè§‰å¾—æœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡æ‰«æä¸‹æ–¹èµèµç æåŠ©é¡¹ç›® :)

<img src="asserts/donate.png" alt="donate" width="400" height="400" />

<hr>

<img src='asserts/alipay.jpg' alt='alipay' width='400' height='400'>

å¤åˆ¶ 852129070 ğŸ®æ­å¼€..ğŸ®æ”¯ä»˜å®å»æœç´¢ï¼Œâœ”`ho n`g ç¬£âœ”é€å–œåº†ï¼Œå¹¸ç¤º ç•åˆ°å¿ƒ